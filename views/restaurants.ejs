<!DOCTYPE html>
<html>
    <head>
        <% const title = global.primary_routes_title[page]%>
        <% include ../views/templates/head %>
        <script src="https://maps.googleapis.com/maps/api/js?key=<%= API %>&libraries=places&callback=initMap"
                async defer></script>
        <script src="/javascripts/map.js"></script>
        <script src="/javascripts/search.js"></script>
        <script>
            $('document').ready(() => {
                setCuisineSel(<%- JSON.stringify(cuisine_arr) %>);
                setLocation();
            });
            $( function() {
                $("#locationSearch").hide();
                $( "#toggleLocationSearch" ).click(() => {
                    $( "#locationSearch" ).slideToggle(() => {

                    });
                });
            } );
        </script>
    </head>
    <body>
        <% include ../views/templates/nav.ejs%>
        <div class="jumbotron text-center">
            <h1><%= title %></h1>
            <input class="selectize-input searchTextBox" form="xForm" type="text" name="keywords" id="keywords" placeholder="Keywords"/><br />
            <input form="xForm" type="text" name="cuisine" id="cuisine_selector" placeholder="Cuisine"/>
            Match Any? <input form="xForm" type="checkbox" name="all_any_cuisine" id="all_any_cuisine" /><br />
            <button id="toggleLocationSearch" type="button" class="btn btn-secondary btn-sm" style="margin-top:8px">Choose Location</button>
            <div id="locationSearch">
                <input class="selectize-input searchTextBox" form="xForm" name="pac_input" id="pac-input" type="text"
                       placeholder="Enter a location" />
                <input class="selectize-input searchTextBox" form="xForm" type="number" name="radius" id="radius" step="any" placeholder="Radius (km)" />
                <div class="pac-card" id="pac-card">
                    <div id="map"></div>
                </div>
            </div>
            <hr />
            <form id="xForm" onsubmit="onSubmit('<%- page %>', searchFn);">
                <input type="hidden" name="lat" id="lat" value="0"/>
                <input type="hidden" name="lng" id="lng" value="0"/>
            </form>
            <button form="xForm" id="g" name="g" type="submit" class="btn btn-primary">Search</button>
        </div>
        <main id="results" style="margin-top:30px">
        <% if (typeof result_arr !== 'undefined') { %>
            <script>
                searchFn(<%-result_arr%>, <%- JSON.stringify(cuisine_arr)%>);
            </script>
        <%}%>
        </main>
    </body>
</html>
